(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[693],{55204:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/publish/[step]",function(){return r(19595)}])},94795:function(e,t,r){"use strict";function n(e,t){return t.filter((function(t){return t.name===e}))[0]}r.d(t,{R:function(){return n}})},81517:function(e,t,r){"use strict";function n(e){var t=decodeURI(e).trim().toLowerCase();return t.startsWith("javascript:")||t.startsWith("data:")||t.startsWith("vbscript:")?"about:blank":e}r.d(t,{N:function(){return n}})},19595:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return nr}});var n=r(85893),a=r(67294),i=r(34051),o=r.n(i),s=r(82580),c=r(54302),u=JSON.parse('{"Pu":{"T":"Metadata","X":[{"name":"nft","label":"Data NFT","type":"nft","help":"All metadata is stored on-chain in a newly deployed ERC-721 contract representing this asset, created with this name, symbol, description and image.","required":true},{"name":"type","label":"Asset Type","type":"boxSelection","options":["Dataset","Algorithm"],"required":true},{"name":"name","label":"Title","placeholder":"e.g. Shapes of Desert Plants","required":true},{"name":"description","label":"Description","help":"Add a thorough description with as much detail as possible. You can use [Markdown](https://daringfireball.net/projects/markdown/basics). You can change the description at any time. If you provide personal data, please note that it will remain in the transaction history. For more information on how personal data is handled within the metadata, please refer to our [privacy policy](/privacy/en).","type":"textarea","required":true},{"name":"author","label":"Author","placeholder":"e.g. Jelly McJellyfish","help":"Give proper attribution for your dataset. You are welcome to use a pseudonym, and you can change your author name at any time. Please note that it will remain in the transaction history. For more information on how personal data is handled within the metadata, please refer to our [privacy policy](/privacy/en).","required":true},{"name":"tags","label":"Tags","placeholder":"e.g. logistics, ai","help":"Separate tags with comma."},{"name":"dockerImage","label":"Docker Image","help":"Please select an image to run your algorithm.","type":"boxSelection","options":["populated from algorithmContainerPresets in Publish/_constants"],"required":true},{"name":"dockerImageCustom","label":"Docker Image URL","placeholder":"e.g. oceanprotocol/algo_dockers or https://example.com/image_path","help":"Provide the name of a public Docker image or the full url if you have it hosted in a 3rd party repo","required":true},{"name":"dockerImageCustomTag","label":"Docker Image Tag","placeholder":"e.g. latest","help":"Provide the tag for your Docker image.","required":true},{"name":"dockerImageCustomEntrypoint","label":"Docker Entrypoint","placeholder":"e.g. python $ALGO","help":"Provide the entrypoint for your algorithm.","required":true},{"name":"termsAndConditions","label":"Terms & Conditions","type":"checkbox","options":["I agree to the Terms and Conditions"],"required":true}]},"uZ":{"T":"Access","X":[{"name":"dataTokenOptions","label":"Datatoken","type":"datatoken","help":"The datatoken used for accessing this asset will be created with this name & symbol.","required":true},{"name":"providerUrl","label":"Provider URL","type":"providerUrl","help":"Enter the URL for your custom [provider](https://github.com/oceanprotocol/provider/) or leave as is to use the default one. If you change your provider URL after adding your file, please add & validate your file again.","placeholder":"e.g. https://provider.oceanprotocol.com/","required":true},{"name":"files","label":"File","placeholder":"e.g. https://file.com/file.json","help":"This URL will be stored encrypted after publishing. **Please make sure that the endpoint is accessible over the internet and is not protected by a firewall or by credentials.** For a compute dataset, your file should match the file type required by the algorithm, and should not exceed 1 GB in file size. ","prominentHelp":true,"type":"files","required":true},{"name":"links","label":"Sample file","placeholder":"e.g. https://file.com/samplefile.json","help":"This file should reveal the data structure of your dataset, e.g. by including the header and one line of a CSV file. This file URL will be publicly available after publishing. **Please make sure that the endpoint is accessible over the internet and is not protected by a firewall or by credentials.**","prominentHelp":true,"type":"files"},{"name":"algorithmPrivacy","label":"Algorithm Privacy","type":"checkbox","options":["Keep my algorithm private"],"help":"By default, your algorithm can be downloaded for free or a fixed price, in addition to running in compute jobs. Enabling this option will prevent downloading, so your algorithm can only be run as part of a compute job on a dataset.","required":false},{"name":"access","label":"Access Type","help":"Choose how you want your files to be accessible for the specified price.","type":"boxSelection","options":["Access","Compute"],"required":true,"disclaimer":"Please do not provide downloadable personal data without the consent of the data subjects.","disclaimerValues":["Download"]},{"name":"timeout","label":"Timeout","help":"Define how long buyers should be able to download the dataset again after the initial purchase.","type":"select","options":["Forever","1 day","1 week","1 month","1 year"],"sortOptions":false,"required":true}]},"D":{"T":"Pricing"},"RN":{"T":"Preview"},"I8":{"T":"Submit"}}'),l=r(4210),d=r(35253),p=r(71323),m=r(67481),f=r(15360),h=r.n(f);function v(e){var t=e.meta;return t.error?(0,n.jsx)("div",{className:h().error,children:t.error}):null}var g=r(87699),b=r.n(g),y=r(94795),x=r(7187),k=r(72555),w=r.n(k);function _(e){var t,r,a=e.approvedBaseTokens,i=(0,s.u6)(),o=i.values,c=i.setFieldValue;return(null===a||void 0===a?void 0:a.length)>0&&(0,n.jsx)(x.Z,{name:"coinselect",className:w().coinSelect,type:"select",options:null===a||void 0===a?void 0:a.map((function(e){return e.symbol})),value:null===(t=o.pricing)||void 0===t||null===(r=t.baseToken)||void 0===r?void 0:r.symbol,onChange:function(e){var t=a.find((function(t){return t.symbol===e.target.value}));c("pricing.baseToken",t)}})}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){P(e,t,r[t])}))}return e}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){s=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e){var t,r,a,i,o=e.approvedBaseTokens,c=e.content,u=O((0,s.U$)("pricing.price"),2),l=u[0],d=u[1],f=(0,s.u6)().values,h=f.services[0].dataTokenOptions;return(0,n.jsx)("div",{className:b().price,children:"free"===f.pricing.type?(0,n.jsx)("div",{className:b().free,children:(0,n.jsx)(s.gN,T({},(0,y.R)("freeAgreement",c.fields),{component:m.Z,name:"pricing.freeAgreement"}))}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:b().grid,children:[(0,n.jsxs)("div",{className:b().form,children:[(0,n.jsx)(m.Z,T({type:"number",min:"1",placeholder:"0",prefix:(null===o||void 0===o?void 0:o.length)>1?(0,n.jsx)(_,{approvedBaseTokens:o}):null===(t=f.pricing)||void 0===t||null===(r=t.baseToken)||void 0===r?void 0:r.symbol},l)),(0,n.jsx)(v,{meta:d})]}),(0,n.jsx)("div",{className:b().datatoken,children:(0,n.jsxs)("h4",{children:["= ",(0,n.jsx)("strong",{children:"1"})," ",h.symbol," ",(0,n.jsx)(p.Z,{price:l.value,symbol:null===(a=f.pricing)||void 0===a||null===(i=a.baseToken)||void 0===i?void 0:i.symbol,className:b().conversion})]})})]})})})}var F=r(35073),C=r(1611),I=r.n(C),Z=r(51781),A=r(13674),R=r(71132),D=r(69016),S=r.n(D),E=function(e){var t=e.title,r=e.name,a=e.tooltip,i=e.value;return(0,n.jsx)(m.Z,{label:(0,n.jsxs)(n.Fragment,{children:[t,(0,n.jsx)(F.Z,{content:a})]}),value:i,name:r,postfix:"%",readOnly:!0,size:"small"})};function q(e){var t=e.tooltips,r=(0,a.useState)(""),i=r[0],o=r[1],s=(0,A.$6)().chainId,c=(0,R.c8)().appConfig;return(0,a.useEffect)((function(){(0,Z.cA)(s||1).then((function(e){o((null===e||void 0===e?void 0:e.swapOceanFee)?new(S())(e.swapOceanFee).mul(100).toString():"0")}))}),[s]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:I().fees,children:[(0,n.jsx)(E,{title:"Community Swap Fee",name:"communityFee",tooltip:t.communityFee,value:i}),(0,n.jsx)(E,{title:"Marketplace Fee",name:"marketplaceFee",tooltip:t.marketplaceFee,value:null===c||void 0===c?void 0:c.publisherMarketFixedSwapFee})]})})}var M=r(17072),L=r.n(M);function H(e){var t=e.approvedBaseTokens,r=e.content;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.Z,{children:r.info}),(0,n.jsx)("h4",{className:L().title,children:"Price"}),(0,n.jsx)(N,{approvedBaseTokens:t}),(0,n.jsx)(q,{tooltips:r.tooltips})]})}var U=r(31139),V=r.n(U);function X(e){var t=e.content,r=(0,s.u6)(),i=r.values,o=r.setFieldValue;return(0,a.useEffect)((function(){i.pricing.freeAgreement?(o("pricing.price",1),o("pricing.amountDataToken",1e3)):(o("pricing.price",0),o("pricing.amountDataToken",0))}),[o,i]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.Z,{children:t.info}),(0,n.jsx)("h4",{className:V().title,children:"Price"}),(0,n.jsx)(N,{content:t})]})}var B,W=JSON.parse('{"U":{"B":{"title":"Fixed","info":"Set your price for accessing this dataset. The datatoken for this dataset will be worth the entered amount of the selected base token.","tooltips":{"communityFee":"Goes to Ocean DAO for teams to improve the tools, build apps, do outreach, and more. A small fraction is used to burn OCEAN. This fee is collected when downloading or using an asset in a compute job.","marketplaceFee":"Goes to the marketplace owner that is hosting and providing the marketplace and is collected when downloading or using an asset in a compute job. In CoralApp Data Marketplace, it is treated as network revenue that goes to the Ocean community."}},"g":{"title":"Free","info":"Set your dataset as free. The datatoken for this dataset will be given for free via creating a faucet.","fields":[{"name":"freeAgreement","type":"checkbox","options":["I want this asset to be free. I understand network fees are still to be paid"]}]}}}');function K(){var e=(0,R.c8)().appConfig,t=(0,A.$6)(),r=t.approvedBaseTokens,i=t.chainId,o=(0,s.u6)(),c=o.values,u=o.setFieldValue,d=c.pricing.type,p=(null===r||void 0===r?void 0:r.find((function(e){return e.name.toLowerCase().includes("ocean")})))||(null===r||void 0===r?void 0:r[0]),m=!!(null===r||void 0===r?void 0:r.find((function(e){var t,r;return(null===e||void 0===e?void 0:e.address)===(null===c||void 0===c||null===(t=c.pricing)||void 0===t||null===(r=t.baseToken)||void 0===r?void 0:r.address)})));(0,a.useEffect)((function(){(null===r||void 0===r?void 0:r.length)&&(m||u("pricing.baseToken",p))}),[r,i,p,m,u,c.pricing.baseToken]);var f=(0,a.useCallback)((function(){return["true"===e.allowFixedPricing?{title:W.U.B.title,content:(0,n.jsx)(H,{approvedBaseTokens:r,content:W.U.B})}:void 0,"true"===e.allowFreePricing?{title:W.U.g.title,content:(0,n.jsx)(X,{content:W.U.g})}:void 0].filter((function(e){return void 0!==e}))}),[e.allowFixedPricing,e.allowFreePricing,r]),h=(0,a.useState)(f()),v=h[0],g=h[1];return(0,a.useEffect)((function(){g(f())}),[f]),(0,n.jsx)(l.Z,{items:v,handleTabChange:function(e){var t=e.toLowerCase();u("pricing.type",t),u("pricing.price",0),u("pricing.freeAgreement",!1),u("pricing.baseToken",p),"free"!==t&&u("pricing.amountDataToken",1e3)},defaultIndex:"free"===d?1:0,className:V().pricing,showRadio:!0})}function $(){return $=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$.apply(this,arguments)}var J,G=function(e){return a.createElement("svg",$({width:"1em",height:"1em",viewBox:"0 0 15 12",xmlns:"http://www.w3.org/2000/svg"},e),B||(B=a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.846.356H0v2.859h2.846V.356Zm0 4.288H0v2.858h2.846V4.644ZM0 9h2.846v2.858H0V9ZM8.538.356H5.692v2.859h2.846V.356ZM5.692 4.644h2.846v2.858H5.692V4.644ZM8.538 9H5.692v2.858h2.846V9ZM11.384.356h2.846v2.859h-2.846V.356Zm2.846 4.288h-2.846v2.858h2.846V4.644ZM11.384 9h2.846v2.858h-2.846V9Z"})))};function z(){return z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},z.apply(this,arguments)}var Y=function(e){return a.createElement("svg",z({width:"1em",height:"1em",viewBox:"0 0 15 9",xmlns:"http://www.w3.org/2000/svg"},e),J||(J=a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.57.512a.75.75 0 0 0-1.14.976L3.013 4.5.431 7.512a.75.75 0 0 0 1.138.976l3-3.5a.75.75 0 0 0 0-.976l-3-3.5ZM9 4.25a.75.75 0 0 0 0 1.5h5a.75.75 0 0 0 0-1.5H9Z"})))},Q=r(77011),ee=r.n(Q),te=r(411);function re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){re(e,t,r[t])}))}return e}var ae=(0,y.R)("type",u.Pu.X).options;function ie(){var e=(0,R.c8)().siteContent,t=(0,s.u6)(),r=t.values,i=t.setFieldValue,o=[{name:ae[0].toLowerCase(),title:ae[0],checked:r.metadata.type===ae[0].toLowerCase(),icon:(0,n.jsx)(G,{})},{name:ae[1].toLowerCase(),title:ae[1],checked:r.metadata.type===ae[1].toLowerCase(),icon:(0,n.jsx)(Y,{})}],c=et.map((function(e){return{name:"".concat(e.image,":").concat(e.tag),title:"".concat(e.image,":").concat(e.tag),checked:r.metadata.dockerImage==="".concat(e.image,":").concat(e.tag)}}));return(0,a.useEffect)((function(){i("services[0].access","algorithm"===r.metadata.type?"compute":"access"),i("services[0].algorithmPrivacy","algorithm"===r.metadata.type)}),[r.metadata.type]),c.push({name:"custom",title:"Custom",checked:!1}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.gN,ne({},(0,y.R)("nft",u.Pu.X),{component:m.Z,name:"metadata.nft"})),(0,n.jsx)(s.gN,ne({},(0,y.R)("type",u.Pu.X),{component:m.Z,name:"metadata.type",options:o})),"compute"===r.services[0].access&&(0,n.jsx)(te.Z,{className:ee().fieldWarning,state:"info",text:e.warning.ctd}),(0,n.jsx)(s.gN,ne({},(0,y.R)("name",u.Pu.X),{component:m.Z,name:"metadata.name"})),(0,n.jsx)(s.gN,ne({},(0,y.R)("description",u.Pu.X),{component:m.Z,name:"metadata.description",rows:7})),(0,n.jsx)(s.gN,ne({},(0,y.R)("author",u.Pu.X),{component:m.Z,name:"metadata.author"})),(0,n.jsx)(s.gN,ne({},(0,y.R)("tags",u.Pu.X),{component:m.Z,name:"metadata.tags"})),"algorithm"===r.metadata.type&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.gN,ne({},(0,y.R)("dockerImage",u.Pu.X),{component:m.Z,name:"metadata.dockerImage",options:c})),"custom"===r.metadata.dockerImage&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.gN,ne({},(0,y.R)("dockerImageCustom",u.Pu.X),{component:m.Z,name:"metadata.dockerImageCustom"})),(0,n.jsx)(s.gN,ne({},(0,y.R)("dockerImageCustomTag",u.Pu.X),{component:m.Z,name:"metadata.dockerImageCustomTag"})),(0,n.jsx)(s.gN,ne({},(0,y.R)("dockerImageCustomEntrypoint",u.Pu.X),{component:m.Z,name:"metadata.dockerImageCustomEntrypoint"}))]})]}),(0,n.jsx)(s.gN,ne({},(0,y.R)("termsAndConditions",u.Pu.X),{component:m.Z,name:"metadata.termsAndConditions"})),(0,n.jsx)("a",{className:ee().termsLink,href:"/terms",rel:"noopener noreferrer",target:"_blank",children:"View Terms and Conditions"})]})}var oe=r(30331),se=r(39697),ce=r(39178),ue=r.n(ce);function le(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){le(e,t,r[t])}))}return e}var pe=(0,y.R)("access",u.uZ.X).options;function me(){var e=(0,R.c8)().siteContent,t=(0,s.u6)(),r=t.values,i=t.setFieldValue,o=[{name:"download",value:pe[0].toLowerCase(),title:"Download",icon:(0,n.jsx)(oe.Z,{}),checked:r.services[0].access===pe[0].toLowerCase()},{name:pe[1].toLowerCase(),value:pe[1].toLowerCase(),title:pe[1],icon:(0,n.jsx)(se.Z,{}),checked:r.services[0].access===pe[1].toLowerCase()}];return(0,a.useEffect)((function(){null!==r.services[0].algorithmPrivacy&&void 0!==r.services[0].algorithmPrivacy&&i("services[0].access",!0===r.services[0].algorithmPrivacy?"compute":"access")}),[r.services[0].algorithmPrivacy,i]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.gN,de({},(0,y.R)("dataTokenOptions",u.uZ.X),{component:m.Z,name:"services[0].dataTokenOptions"})),"algorithm"===r.metadata.type?(0,n.jsx)(s.gN,de({},(0,y.R)("algorithmPrivacy",u.uZ.X),{component:m.Z,name:"services[0].algorithmPrivacy"})):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.gN,de({},(0,y.R)("access",u.uZ.X),{component:m.Z,name:"services[0].access",options:o})),"compute"===r.services[0].access&&(0,n.jsx)(te.Z,{className:ue().fieldWarning,state:"info",text:e.warning.ctd})]}),(0,n.jsx)(s.gN,de({},(0,y.R)("providerUrl",u.uZ.X),{component:m.Z,name:"services[0].providerUrl"})),(0,n.jsx)(s.gN,de({},(0,y.R)("files",u.uZ.X),{component:m.Z,name:"services[0].files"})),(0,n.jsx)(s.gN,de({},(0,y.R)("links",u.uZ.X),{component:m.Z,name:"services[0].links"})),(0,n.jsx)(s.gN,de({},(0,y.R)("timeout",u.uZ.X),{component:m.Z,name:"services[0].timeout"}))]})}var fe=r(63637),he=r.n(fe),ve=r(44260),ge=r(63237),be=r(46051),ye=r(10130),xe=r(86256),ke=r(31304),we=r.n(ke),_e=r(81517);function je(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,a)}function Pe(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){je(i,n,a,o,s,"next",e)}function s(e){je(i,n,a,o,s,"throw",e)}o(void 0)}))}}function Te(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Te(e,t,r[t])}))}return e}function Ne(e){var t=e.split(".");return t[t.length-1]}function Fe(e){if(""!==e)return et.find((function(t){return"".concat(t.image,":").concat(t.tag)===e}))}function Ce(e){return e.toISOString().replace(/\.[0-9]{3}Z/,"Z")}function Ie(e){var t=null===e||void 0===e?void 0:e.split(",");return null===t||void 0===t?void 0:t.map((function(e){return we()(e).toLowerCase()}))}function Ze(e,t,r){return Ae.apply(this,arguments)}function Ae(){return(Ae=Pe(o().mark((function e(t,r,n){var a,i,s,c,u,l,d,p,m,f,h,v,g,b,y,x,k,w,_,j,P,T,O,N,F,C,I,Z,A,R,D;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.metadata,i=t.services,s=t.user,c=s.chainId,u=s.accountId,l=a.type,d=a.name,p=a.description,m=a.tags,f=a.author,h=a.termsAndConditions,v=a.dockerImage,g=a.dockerImageCustom,b=a.dockerImageCustomTag,y=a.dockerImageCustomEntrypoint,a.dockerImageCustomChecksum,x=i[0],k=x.access,w=x.files,_=x.links,j=x.providerUrl,P=x.timeout,T=n?(0,ge.Kt)(n,c):"0x...",O=Ce(new Date),N=!r&&!n,F=(null===w||void 0===w?void 0:w.length)&&w[0].valid&&[(0,_e.N)(w[0].url)],C=(null===_||void 0===_?void 0:_.length)&&_[0].valid&&[(0,_e.N)(_[0].url)],I=Oe({created:O,updated:O,type:l,name:d,description:p,tags:Ie(m),author:f,license:"https://market.oceanprotocol.com/terms",links:C,additionalInformation:{termsAndConditions:h,source:"hyperdata"}},"algorithm"===l&&""!==v&&{algorithm:{language:(null===F||void 0===F?void 0:F.length)?Ne(F[0]):"",version:"0.1",container:{entrypoint:"custom"===v?y:Fe(v).entrypoint,image:"custom"===v?g:Fe(v).image,tag:"custom"===v?b:Fe(v).tag,checksum:"custom"===v?"":Fe(v).checksum}}}),Z={nftAddress:n,datatokenAddress:r,files:[{type:"url",index:0,url:w[0].url,method:"GET"}]},e.t0=!N&&(null===w||void 0===w?void 0:w.length)&&w[0].valid,!e.t0){e.next=16;break}return e.next=15,(0,xe.HH)(Z,j.url);case 15:e.t0=e.sent;case 16:return A=e.t0,R=Oe({id:(0,ge.XR)(r+A),type:k,files:A||"",datatokenAddress:r,serviceEndpoint:j.url,timeout:(0,be.s4)(P)},"compute"===k&&{compute:t.services[0].computeOptions}),D=Oe({"@context":["https://w3id.org/did/v1"],id:T,nftAddress:n,version:"4.1.0",chainId:c,metadata:I,services:[R]},!r&&{datatokens:[{name:t.services[0].dataTokenOptions.name,symbol:t.services[0].dataTokenOptions.symbol}],nft:Oe({},(0,ye.x$)(null===t||void 0===t?void 0:t.metadata.nft,u))}),e.abrupt("return",D);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Re(e,t,r,n,a){return De.apply(this,arguments)}function De(){return De=Pe(o().mark((function e(t,r,n,a,i){var s,u,l,d,p,m,f,h,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=(0,ye.x$)(t.metadata.nft,r,t.metadata.transferable),ge.KF.log("[publish] Creating NFT with metadata",s),u={templateIndex:2,minter:r,paymentCollector:r,mpFeeAddress:c.marketFeeAddress,feeToken:t.pricing.baseToken.address,feeAmount:c.publisherMarketOrderFee,cap:"115792089237316195423570985008687907853269984665640564039457",name:t.services[0].dataTokenOptions.name,symbol:t.services[0].dataTokenOptions.symbol},ge.KF.log("[publish] Creating datatoken with ercParams",u),e.t0=t.pricing.type,e.next="fixed"===e.t0?8:"free"===e.t0?18:28;break;case 8:return m={fixedRateAddress:n.fixedRateExchangeAddress,baseTokenAddress:t.pricing.baseToken.address,owner:r,marketFeeCollector:c.marketFeeAddress,baseTokenDecimals:t.pricing.baseToken.decimals,datatokenDecimals:18,fixedRate:t.pricing.price.toString(),marketFee:c.publisherMarketFixedSwapFee,withMint:!0},ge.KF.log("[publish] Creating fixed pricing with freParams",m),e.next=12,a.createNftWithDatatokenWithFixedRate(r,s,u,m);case 12:return f=e.sent,l=f.events.NFTCreated.returnValues[0],d=f.events.TokenCreated.returnValues[0],p=f.transactionHash,ge.KF.log("[publish] createNftErcWithFixedRate tx",p),e.abrupt("break",28);case 18:return h={dispenserAddress:n.dispenserAddress,maxTokens:i.utils.toWei("1"),maxBalance:i.utils.toWei("1"),withMint:!0,allowedSwapper:ge.r_},ge.KF.log("[publish] Creating free pricing with dispenserParams",h),e.next=22,a.createNftWithDatatokenWithDispenser(r,s,u,h);case 22:return v=e.sent,l=v.events.NFTCreated.returnValues[0],d=v.events.TokenCreated.returnValues[0],p=v.transactionHash,ge.KF.log("[publish] createNftErcWithDispenser tx",p),e.abrupt("break",28);case 28:return e.abrupt("return",{erc721Address:l,datatokenAddress:d,txHash:p});case 29:case"end":return e.stop()}}),e)}))),De.apply(this,arguments)}function Se(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,a)}function Ee(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Se(i,n,a,o,s,"next",e)}function s(e){Se(i,n,a,o,s,"throw",e)}o(void 0)}))}}function qe(){var e=(0,a.useState)(),t=e[0],r=e[1],i=(0,s.u6)().values;return(0,a.useEffect)((function(){function e(){return(e=Ee(o().mark((function e(){var t,n,a,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Ze(i);case 3:(c=e.sent).accessDetails={type:i.pricing.type,addressOrId:ge.r_,price:"".concat(i.pricing.price),baseToken:{address:ge.r_,name:(null===(t=i.pricing)||void 0===t||null===(n=t.baseToken)||void 0===n?void 0:n.symbol)||"OCEAN",symbol:(null===(a=i.pricing)||void 0===a||null===(s=a.baseToken)||void 0===s?void 0:s.symbol)||"OCEAN"},datatoken:{address:ge.r_,name:"",symbol:""},isPurchasable:!0,isOwned:!1,validOrderTx:"",publisherMarketOrderFee:"0"},r(c);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[i]),(0,n.jsxs)("div",{className:he().preview,children:[(0,n.jsx)("h2",{className:he().previewTitle,children:"Preview"}),(0,n.jsx)("h3",{className:he().assetTitle,children:i.metadata.name}),t&&(0,n.jsx)(ve.Z,{asset:t})]})}var Me=r(69127),Le=r.n(Me),He=r(66128),Ue=r.n(He),Ve=r(98056),Xe=r(42361),Be=r.n(Xe);function We(e){var t=e.txCount,r=e.chainId,a=e.txHash;return a?(0,n.jsx)(Ve.Z,{networkId:r,path:"/tx/".concat(a),className:Be().txHash,children:"View Transaction"}):(0,n.jsxs)("span",{className:Be().txHash,children:[t," Transaction",t>1?"s":""]})}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){s=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ke(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(){var e=(0,s.u6)().values,t=Object.entries(e.feedback).map((function(t,r){var a=$e(t,2),i=(a[0],a[1]);return(0,n.jsxs)("li",{className:Ue()[i.status],children:[(0,n.jsx)("h3",{className:Ue().title,children:i.name}),(0,n.jsx)("div",{className:Ue().txs,children:i.txCount>0&&(0,n.jsx)(We,{txCount:i.txCount,chainId:e.user.chainId,txHash:i.txHash})}),(0,n.jsx)("p",{className:Ue().description,children:i.description}),i.errorMessage&&(0,n.jsx)("span",{title:i.errorMessage,className:Ue().errorMessage,children:i.errorMessage})]},r)}));return(0,n.jsx)("ol",{className:Ue().feedback,children:t})}function Ge(){return(0,n.jsx)("div",{className:Le().submission,children:(0,n.jsx)(Je,{})})}var ze=JSON.parse('{"1":{"name":"Create Tokens & Pricing","description":"The Data NFT representing your asset, the Datatokens defining access to it, and the pricing schema are all created in a single transaction.","status":"pending","txCount":1},"2":{"name":"Construct & Encrypt DDO","description":"Entered metadata is transformed into a structured document (DDO) where the file URLs, and the whole DDO itself are encrypted.","status":"pending","txCount":0},"3":{"name":"Publish DDO","description":"The encrypted DDO is stored on-chain as part of the Data NFT. Indexers like Aquarius can decrypt the DDO for displaying purposes, but the file URLs can only be decrypted by exchanging the respective datatokens for this asset.","status":"pending","txCount":1}}'),Ye=[{step:1,title:u.Pu.T,component:(0,n.jsx)(ie,{})},{step:2,title:u.uZ.T,component:(0,n.jsx)(me,{})},{step:3,title:u.D.T,component:(0,n.jsx)(K,{})},{step:4,title:u.RN.T,component:(0,n.jsx)(qe,{})},{step:5,title:u.I8.T,component:(0,n.jsx)(Ge,{})}],Qe={user:{stepCurrent:1,chainId:1,accountId:""},metadata:{nft:{name:"",symbol:"",description:"",image_data:""},transferable:!0,type:"dataset",name:"",author:"",description:"",tags:"",termsAndConditions:!1,dockerImage:"",dockerImageCustom:"",dockerImageCustomTag:"",dockerImageCustomEntrypoint:""},services:[{files:[{url:""}],links:[{url:""}],dataTokenOptions:{name:"",symbol:""},timeout:"",access:"access",providerUrl:{url:"https://provider.mainnet.oceanprotocol.com",valid:!0,custom:!1},computeOptions:{allowRawAlgorithm:!1,allowNetworkAccess:!0,publisherTrustedAlgorithmPublishers:[],publisherTrustedAlgorithms:[]}}],pricing:{baseToken:{address:"",name:"",symbol:"OCEAN",decimals:18},price:0,type:"true"===c.allowFixedPricing?"fixed":"free",freeAgreement:!1}},et=[{image:"node",tag:"18.6.0",entrypoint:"node $ALGO",checksum:"sha256:c60726646352202d95de70d9e8393c15f382f8c6074afc5748b7e570ccd5995f"},{image:"python",tag:"3.10.5",entrypoint:"python $ALGO",checksum:"sha256:607635763e54907fd75397fedfeb83890e62a0f9b54a1d99d27d748c5d269be4"}],tt=ze,rt=r(69534),nt=r(24519),at=r(65450),it=r(53874),ot=r.n(it),st=JSON.parse('{"title":"Publish","description":"Highlight the important features of your dataset or algorithm to make it more discoverable and catch the interest of data consumers.","warning":"Publishing into a test network first is strongly recommended. Please familiarize yourself with [the market](https://oceanprotocol.com/technology/marketplaces), [the risks](https://blog.oceanprotocol.com/on-staking-on-data-in-ocean-market-3d8e09eb0a13), and the [Terms of Use](/terms).","tooltipAvailableNetworks":"Assets are published to the network your wallet is connected to. These networks are currently supported:"}'),ct=r(7461),ut=r(16098),lt=r.n(ut),dt=r(83618),pt=r.n(dt),mt=r(21159),ft=r(55670),ht=r(7390);function vt(e){var t=e.chainId,r=(0,ft.ZP)().networksList,a=(0,A.$6)().web3Provider;return(0,n.jsx)(mt.Z,{style:"text",className:pt().button,onClick:function(){return function(e){var t=r.find((function(t){return t.chainId===e}));(0,ht.Pj)(a,t)}(t)},children:(0,n.jsx)(at.Z,{networkId:t},t)})}function gt(){var e=(0,ft.ZP)().networksList,t=(0,R.c8)().appConfig,r=[{title:"Main",data:(0,ft.xc)("mainnet",t.chainIdsSupported,e)},{title:"Test",data:(0,ft.xc)("testnet",t.chainIdsSupported,e)}];return(0,n.jsxs)("div",{className:lt().content,children:[st.tooltipAvailableNetworks,r.map((function(e){return e.data.length>0&&(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)("h4",{className:lt().title,children:e.title}),(0,n.jsx)("ul",{className:lt().networks,children:(t=e.data,t.map((function(e){return(0,n.jsx)("li",{children:(0,n.jsx)(vt,{chainId:e})},e)})))})]},e.title);var t}))]})}function bt(e){var t=e.networkId,r=(0,A.$6)(),a=r.isSupportedOceanNetwork,i=r.accountId;return(0,n.jsxs)(n.Fragment,{children:[st.title," ",t&&(0,n.jsxs)(n.Fragment,{children:["into",(0,n.jsx)(at.Z,{networkId:t,className:a||!i?ot().network:"".concat(ot().network," ").concat(ot().error)}),(0,n.jsx)(F.Z,{content:(0,n.jsx)(gt,{}),className:a||!i?ot().tooltip:"".concat(ot().tooltip," ").concat(ot().error),children:(0,n.jsx)(ct.Z,{className:ot().infoIcon})})]})]})}var yt=r(70351),xt=r.n(yt),kt=r(58952),wt=r(11163),_t=r.n(wt),jt=r(23964);function Pt(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,a)}function Tt(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Pt(i,n,a,o,s,"next",e)}function s(e){Pt(i,n,a,o,s,"throw",e)}o(void 0)}))}}function Ot(e){var t,r,a,i=e.scrollToRef,c=e.did,u=function(e){var t=l.query.step;l.push({pathname:"".concat(l.pathname),query:{step:parseInt(t)+("next"===e?1:-1)}}),i.current.scrollIntoView()},l=(0,wt.useRouter)(),d=(0,A.$6)().isSupportedOceanNetwork,p=(0,s.u6)(),m=p.values,f=p.errors,h=p.isValid,v=p.isSubmitting,g=(0,A.$6)(),b=g.connect,y=g.accountId;function x(){return(x=Tt(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,b();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=1===m.user.stepCurrent&&void 0!==f.metadata||2===m.user.stepCurrent&&void 0!==f.services||3===m.user.stepCurrent&&void 0!==f.pricing,w="error"===(null===(t=m.feedback)||void 0===t?void 0:t[1].status)||"error"===(null===(r=m.feedback)||void 0===r?void 0:r[2].status)||"error"===(null===(a=m.feedback)||void 0===a?void 0:a[3].status);return(0,n.jsx)("footer",{className:xt().actions,children:c?(0,n.jsx)(kt.Z,{success:"Successfully published!",action:(0,n.jsx)(mt.Z,{style:"primary",to:"/asset/".concat(c),children:"View Asset"})}):(0,n.jsxs)(n.Fragment,{children:[m.user.stepCurrent>1&&(0,n.jsx)(mt.Z,{onClick:function(e){e.preventDefault(),u("prev")},disabled:v,children:"Back"}),m.user.stepCurrent<Ye.length?(0,n.jsx)(mt.Z,{style:"primary",onClick:function(e){e.preventDefault(),u("next")},disabled:k,children:"Continue"}):y?d?(0,n.jsx)(mt.Z,{type:"submit",style:"primary",disabled:v||!h,children:v?(0,n.jsx)(jt.Z,{white:!0}):w?"Retry":"Submit"}):(0,n.jsx)(F.Z,{content:(0,n.jsx)(gt,{}),children:(0,n.jsxs)(mt.Z,{type:"submit",style:"primary",disabled:!0,className:xt().infoButton,children:["Unsupported Network ",(0,n.jsx)(ct.Z,{className:xt().infoIcon})]})}):(0,n.jsx)(mt.Z,{type:"submit",style:"primary",onClick:function(e){return x.apply(this,arguments)},children:"Connect Wallet"})]})})}var Nt=r(48842),Ft=r(35165),Ct=r.n(Ft);function It(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,a)}function Zt(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){It(i,n,a,o,s,"next",e)}function s(e){It(i,n,a,o,s,"throw",e)}o(void 0)}))}}function At(){var e=(0,s.u6)().values,t=(0,a.useState)(),r=t[0],i=t[1];return(0,a.useEffect)((function(){function t(){return t=Zt(o().mark((function t(){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ze(e);case 2:r=t.sent,i(r);case 4:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e]),(0,n.jsxs)("div",{className:Ct().debug,children:[(0,n.jsx)(Nt.Z,{title:"Collected Form Values",output:e}),(0,n.jsx)(Nt.Z,{title:"Transformed DDO Values",output:r})]})}var Rt=r(68112),Dt=r.n(Rt);function St(){var e=function(e){r.push("/publish/".concat(e))},t=function(e){var t,r,n=void 0===c.metadata,a=void 0===c.services,i=void 0===c.pricing&&((null===(t=u.pricing)||void 0===t?void 0:t.price)||(null===(r=u.pricing)||void 0===r?void 0:r.freeAgreement));return 1===e&&n||2===e&&a||3===e&&i||4===e&&(n&&a&&i)?Dt().success:null},r=(0,wt.useRouter)(),i=(0,s.u6)(),o=i.values,c=i.errors,u=i.touched,l=i.setFieldValue;return(0,a.useEffect)((function(){var t,n=1;if(null===(t=r.query)||void 0===t?void 0:t.step){var a=r.query.step,i=parseInt(a);i<=Ye.length?n=i:e(1)}l("user.stepCurrent",n)}),[r]),(0,n.jsx)("nav",{className:Dt().navigation,children:(0,n.jsx)("ol",{children:Ye.map((function(r){return(0,n.jsx)("li",{onClick:function(){return e(r.step)},className:"".concat(o.user.stepCurrent===r.step?Dt().current:null," ").concat(t(r.step)),children:r.title},r.title)}))})})}var Et=r(99436);function qt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){qt(e,t,r[t])}))}return e}function Lt(e){var t,r,n=e.feedback,i=(0,A.$6)(),o=i.chainId,c=i.accountId,u=(0,s.u6)(),l=u.values,d=u.setFieldValue,p=u.touched,m=u.setTouched;return(0,a.useEffect)((function(){o&&c&&(d("user.chainId",o),d("user.accountId",c))}),[o,c,d]),(0,a.useEffect)((function(){d("feedback",n)}),[n,d]),(0,a.useEffect)((function(){d("feedback",Mt({},n,{1:Mt({},n[1],{txCount:1,description:tt[1].description})}))}),[l.pricing.type,n,d]),(0,a.useEffect)((function(){var e,t;if((null===l||void 0===l||null===(e=l.user)||void 0===e?void 0:e.chainId)&&!0!==(null===(t=null===l||void 0===l?void 0:l.services[0])||void 0===t?void 0:t.providerUrl.custom)){var r=(0,Et.H)(l.user.chainId);r&&d("services[0].providerUrl",{url:r.providerUri,valid:!0,custom:!1}),m(Mt({},p,{services:[{providerUrl:{url:!0}}]}))}}),[null===l||void 0===l||null===(t=l.user)||void 0===t?void 0:t.chainId,null===(r=null===l||void 0===l?void 0:l.services[0])||void 0===r?void 0:r.providerUrl.custom,d,m]),Ye.filter((function(e){return e.step===l.user.stepCurrent}))[0].component}var Ht=r(7810);var Ut=function(){var e=(0,A.$6)(),t=e.web3,r=e.chainId,n=(0,a.useState)(),i=n[0],o=n[1];return(0,a.useEffect)((function(){if(t&&r){var e=(0,Et.H)(r),n=new ge.Vf(null===e||void 0===e?void 0:e.nftFactoryAddress,t);o(n)}}),[t,r]),i},Vt=r(13778),Xt=r(74231),Bt=r(30508),Wt={type:Xt.Z_().matches(/dataset|algorithm/g,{excludeEmptyString:!0}).required("Required"),name:Xt.Z_().min(4,(function(e){return"Title must be at least ".concat(e.min," characters")})).required("Required"),description:Xt.Z_().min(10,(function(e){return"Description must be at least ".concat(e.min," characters")})).max(5e3,(function(e){return"Description must have maximum ".concat(e.max," characters")})).required("Required"),author:Xt.Z_().required("Required"),tags:Xt.Z_().nullable(),termsAndConditions:Xt.O7().required("Required").isTrue("Please agree to the Terms and Conditions.")},Kt={files:Xt.IX().of(Xt.Ry().shape({url:Xt.Z_().url("Must be a valid URL.").required("Required"),valid:Xt.O7().isTrue().required("File must be valid.")})).min(1,"At least one file is required.").required("Enter a valid URL and click ADD FILE."),links:Xt.IX().of(Xt.Ry().shape({url:Xt.Z_().url("Must be a valid URL."),valid:Xt.O7()})).nullable(),dataTokenOptions:Xt.Ry().shape({name:Xt.Z_(),symbol:Xt.Z_()}),timeout:Xt.Z_().required("Required"),access:Xt.Z_().matches(/compute|access/g).required("Required"),providerUrl:Xt.Ry().shape({url:Xt.Z_().url("Must be a valid URL.").required("Required"),valid:Xt.O7().isTrue().required("Valid Provider is required."),custom:Xt.O7()})},$t={type:Xt.Z_().matches(/fixed|free/g,{excludeEmptyString:!0}).required("Required"),price:Xt.Rx().min(1,(function(e){return"Must be more or equal to ".concat(e.min)})).max(1e6,(function(e){return"Must be less than or equal to ".concat(e.max)})).test("maxDigitsAfterDecimal","Must have maximum ".concat(Vt.z," decimal digits"),(function(e){return(0,Bt.FD)(Vt.z).test(null===e||void 0===e?void 0:e.toString())})).required("Required")},Jt=Xt.Ry().shape({user:Xt.Ry().shape({stepCurrent:Xt.Rx(),chainId:Xt.Rx().required("Required"),accountId:Xt.Z_().required("Required")}),metadata:Xt.Ry().shape(Wt),services:Xt.IX().of(Xt.Ry().shape(Kt)),pricing:Xt.Ry().shape($t)}),Gt=r(94523);function zt(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,a)}function Yt(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){zt(i,n,a,o,s,"next",e)}function s(e){zt(i,n,a,o,s,"throw",e)}o(void 0)}))}}function Qt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function er(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Qt(e,t,r[t])}))}return e}function tr(e){var t=e.content,r=(0,Ht.o)().debug,i=(0,A.$6)(),c=i.accountId,u=i.web3,l=i.chainId,d=(0,rt.I)(c),p=d.isInPurgatory,m=d.purgatoryData,f=(0,a.useRef)(),h=Ut(),v=(0,Gt.E)(),g=(0,a.useState)(tt),b=g[0],y=g[1],x=(0,a.useState)(),k=x[0],w=x[1],_=(0,a.useState)(),j=_[0],P=_[1],T=(0,a.useState)(),O=T[0],N=T[1],F=(0,a.useState)(),C=F[0],I=F[1],Z=(0,a.useState)(),R=Z[0],D=Z[1];function S(e){return E.apply(this,arguments)}function E(){return(E=Yt(o().mark((function e(t){var r,n,a,i,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y((function(e){return er({},e,{1:er({},e[1],{status:"active",errorMessage:null})})})),e.prev=1,r=(0,Et.H)(l),ge.KF.log("[publish] using config: ",r),e.next=6,Re(t,c,r,h,u);case 6:if(n=e.sent,a=n.erc721Address,i=n.datatokenAddress,s=n.txHash,Boolean(a&&i&&s)){e.next=13;break}throw new Error("No Token created. Please try again.");case 13:return ge.KF.log("[publish] createTokensAndPricing tx",s),ge.KF.log("[publish] erc721Address",a),ge.KF.log("[publish] datatokenAddress",i),y((function(e){return er({},e,{1:er({},e[1],{status:"success",txHash:s})})})),e.abrupt("return",{erc721Address:a,datatokenAddress:i});case 20:e.prev=20,e.t0=e.catch(1),ge.KF.error("[publish] error",e.t0.message),e.t0.message.length>65&&(e.t0.message="No Token created. Please try again."),y((function(t){return er({},t,{1:er({},t[1],{status:"error",errorMessage:e.t0.message})})}));case 25:case"end":return e.stop()}}),e,null,[[1,20]])})))).apply(this,arguments)}function q(e,t,r){return M.apply(this,arguments)}function M(){return M=Yt(o().mark((function e(t,r,n){var a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y((function(e){return er({},e,{2:er({},e[2],{status:"active",errorMessage:null})})})),e.prev=1,n&&r){e.next=4;break}throw new Error("No NFT or Datatoken received. Please try again.");case 4:return e.next=6,Ze(t,n,r);case 6:if(a=e.sent){e.next=9;break}throw new Error("No DDO received. Please try again.");case 9:return N(a),ge.KF.log("[publish] Got new DDO",a),e.next=13,ge.ag.encrypt(a,t.services[0].providerUrl.url,v());case 13:if(i=e.sent){e.next=16;break}throw new Error("No encrypted DDO received. Please try again.");case 16:return I(i),ge.KF.log("[publish] Got encrypted DDO",i),y((function(e){return er({},e,{2:er({},e[2],{status:"success"})})})),e.abrupt("return",{ddo:a,ddoEncrypted:i});case 22:e.prev=22,e.t0=e.catch(1),ge.KF.error("[publish] error",e.t0.message),y((function(t){return er({},t,{2:er({},t[2],{status:"error",errorMessage:e.t0.message})})}));case 26:case"end":return e.stop()}}),e,null,[[1,22]])}))),M.apply(this,arguments)}function L(e,t,r){return H.apply(this,arguments)}function H(){return H=Yt(o().mark((function e(t,r,n){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y((function(e){return er({},e,{3:er({},e[3],{status:"active",errorMessage:null})})})),e.prev=1,r&&n){e.next=4;break}throw new Error("No DDO received. Please try again.");case 4:return e.next=6,(0,ye.MI)(r,c,u,t.metadata.nft,v());case 6:if(null===(a=e.sent)||void 0===a?void 0:a.transactionHash){e.next=9;break}throw new Error("Metadata could not be written into the NFT. Please try again.");case 9:return ge.KF.log("[publish] setMetadata result",a),y((function(e){return er({},e,{3:er({},e[3],{status:a?"success":"error",txHash:null===a||void 0===a?void 0:a.transactionHash})})})),e.abrupt("return",{did:r.id});case 14:e.prev=14,e.t0=e.catch(1),ge.KF.error("[publish] error",e.t0.message),y((function(t){return er({},t,{3:er({},t[3],{status:"error",errorMessage:e.t0.message})})}));case 18:case"end":return e.stop()}}),e,null,[[1,14]])}))),H.apply(this,arguments)}function U(e){return V.apply(this,arguments)}function V(){return V=Yt(o().mark((function e(t){var r,n,a,i,s,c,u,l,d,p,m,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=j,a=O,i=C,s=R,(r=k)&&n){e.next=15;break}return e.next=8,S(t);case 8:c=e.sent,u=c.erc721Address,l=c.datatokenAddress,r=u,n=l,w(u),P(l);case 15:if(a&&i){e.next=25;break}return e.next=18,q(t,r,n);case 18:d=e.sent,p=d.ddo,m=d.ddoEncrypted,a=p,i=m,N(p),I(m);case 25:if(s){e.next=31;break}return e.next=28,L(t,a,i);case 28:f=e.sent.did,s=f,D(f);case 31:case"end":return e.stop()}}),e)}))),V.apply(this,arguments)}return p&&m?null:(0,n.jsx)(s.J9,{initialValues:Qe,validationSchema:Jt,onSubmit:function(){var e=Yt(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:function(e){var a=e.values;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(nt.Z,{title:(0,n.jsx)(bt,{networkId:a.user.chainId}),description:t.description}),(0,n.jsxs)(s.l0,{className:ue().form,ref:f,children:[(0,n.jsx)(St,{}),(0,n.jsx)(Lt,{feedback:b}),(0,n.jsx)(Ot,{scrollToRef:f,did:R})]}),r&&(0,n.jsx)(At,{})]})}})}var rr=r(53233);function nr(){var e=st.title,t=st.description;return(0,n.jsx)(rr.Z,{title:e,description:t,uri:_t().route,noPageHeader:!0,children:(0,n.jsx)(tr,{content:st})})}},70351:function(e){e.exports={actions:"Actions_actions__QFXHB",infoIcon:"Actions_infoIcon__zwDh8",infoButton:"Actions_infoButton__8G3fj"}},83618:function(e){e.exports={button:"Network_button__5TtqP"}},16098:function(e){e.exports={networks:"AvailableNetworks_networks__nO8MI",title:"AvailableNetworks_title__Wjrr8",content:"AvailableNetworks_content__1WaCm"}},35165:function(e){e.exports={debug:"Debug_debug__HKPSH"}},77011:function(e){e.exports={termsLink:"Metadata_termsLink__Xxq6H",fieldWarning:"Metadata_fieldWarning__QQwEP Publish_fieldWarning__z5bFR"}},68112:function(e){e.exports={navigation:"Navigation_navigation__Ynw3J",current:"Navigation_current__LJfnX",success:"Navigation_success__4fl6W"}},63637:function(e){e.exports={preview:"Preview_preview__bFPsi",previewTitle:"Preview_previewTitle__3EsFN",assetTitle:"Preview_assetTitle__QYWM9"}},72555:function(e){e.exports={coinSelect:"CoinSelect_coinSelect__cHpeV InputElement_select__GZZnj InputElement_input__LgRt4"}},1611:function(e){e.exports={fees:"Fees_fees__A53Ij"}},17072:function(e){e.exports={title:"Fixed_title__vjfbk",tokens:"Fixed_tokens__YNWrB",subtitle:"Fixed_subtitle__N7dC1",alertArea:"Fixed_alertArea__0_7L2"}},87699:function(e){e.exports={form:"Price_form__aMXjr",price:"Price_price__HX81j",grid:"Price_grid__TFEgU",fixed:"Price_fixed__rAoqh",datatoken:"Price_datatoken___sNDD",conversion:"Price_conversion__6KDfp",free:"Price_free__LtJMx"}},31139:function(e){e.exports={pricing:"Pricing_pricing__799Sb",title:"Pricing_title__bdkub"}},66128:function(e){e.exports={feedback:"Feedback_feedback__oXosl",active:"Feedback_active__7KKGy",loader:"Feedback_loader__rrt0N",success:"Feedback_success__HE9hu",error:"Feedback_error__n_BTy",title:"Feedback_title__EZzth",txs:"Feedback_txs___JVB5",description:"Feedback_description__8JZvp",errorMessage:"Feedback_errorMessage__xi8Wr"}},42361:function(e){e.exports={txHash:"TransactionCount_txHash__9NMP5"}},69127:function(){},53874:function(e){e.exports={network:"Title_network__FFYls",tooltip:"Title_tooltip___IRtU",error:"Title_error__E3skD",infoIcon:"Title_infoIcon__moj1D Actions_infoIcon__zwDh8"}},39178:function(e){e.exports={form:"Publish_form__4Jt8S Box_box__l77_J",fieldWarning:"Publish_fieldWarning__z5bFR"}}},function(e){e.O(0,[38,348,44,766,410,136,465,949,674,774,888,179],(function(){return t=55204,e(e.s=t);var t}));var t=e.O();_N_E=t}]);